<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Shoes</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: #333;
    }

    .container {
      width: 100%;
      max-width: 600px;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: #6a11cb;
      text-decoration: none;
      font-weight: 500;
      margin-bottom: 20px;
      padding: 10px 15px;
      border-radius: 8px;
      transition: all 0.3s ease;
      background: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .back-link:hover {
      background: #6a11cb;
      color: white;
      transform: translateX(-5px);
    }

    .form-card {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .form-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .form-icon {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 15px;
      color: white;
      font-size: 28px;
    }

    .form-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 8px;
      color: #2d3748;
    }

    .form-subtitle {
      color: #718096;
      font-size: 16px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: #4a5568;
      font-weight: 500;
    }

    .input-wrapper {
      position: relative;
    }

    .input-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #a0aec0;
    }

    input[type="text"],
    input[type="number"] {
      width: 100%;
      padding: 15px 15px 15px 45px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    input[type="text"]:focus,
    input[type="number"]:focus {
      border-color: #ff8c00;
      box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.1);
      outline: none;
    }

    .error-message {
      color: #e53e3e;
      font-size: 14px;
      margin-top: 5px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .submit-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255, 140, 0, 0.4);
    }

    .color-preview {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: inline-block;
      margin-left: 10px;
      border: 2px solid #e2e8f0;
      vertical-align: middle;
    }

    .current-values {
      margin-top: 25px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .current-title {
      font-size: 14px;
      font-weight: 600;
      color: #4a5568;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .current-list {
      font-size: 13px;
      color: #718096;
      padding-left: 20px;
    }

    .current-list li {
      margin-bottom: 5px;
    }

    .footer {
      text-align: center;
      margin-top: 30px;
      color: #718096;
      font-size: 14px;
    }

    /* Animation for the form icon */
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
      100% { transform: translateY(0px); }
    }

    .form-icon {
      animation: float 3s ease-in-out infinite;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .form-card {
        padding: 30px 20px;
      }

      .form-title {
        font-size: 24px;
      }
    }
  </style>
</head>
<body>
<div class="container">
  <a href="/" class="back-link">
    <i class="fas fa-arrow-left"></i> Back to Main Menu
  </a>

  <div class="form-card">
    <div class="form-header">
      <div class="form-icon">
        <i class="fas fa-edit"></i>
      </div>
      <h1 class="form-title">Edit Shoes</h1>
      <p class="form-subtitle">Update the details for this pair of shoes</p>
    </div>

    <form th:method="PATCH" th:object="${shoes}" th:action="@{/{id}/edit(id=${shoes.id})}">
      <div class="form-grid">
        <div class="form-group">
          <label for="name">Name</label>
          <div class="input-wrapper">
            <i class="fas fa-tag input-icon"></i>
            <input type="text"
                   th:field="*{name}"
                   id="name"
                   placeholder="Enter shoe name"
                   required>
          </div>
          <div class="error-message" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">
            <i class="fas fa-exclamation-circle"></i> <span th:errors="*{name}"></span>
          </div>
        </div>

        <div class="form-group">
          <label for="brand">Brand</label>
          <div class="input-wrapper">
            <i class="fas fa-copyright input-icon"></i>
            <input type="text"
                   th:field="*{brand}"
                   id="brand"
                   placeholder="Enter brand name"
                   required>
          </div>
          <div class="error-message" th:if="${#fields.hasErrors('brand')}" th:errors="*{brand}">
            <i class="fas fa-exclamation-circle"></i> <span th:errors="*{brand}"></span>
          </div>
        </div>

        <div class="form-group">
          <label for="color">Color</label>
          <div class="input-wrapper">
            <i class="fas fa-palette input-icon"></i>
            <input type="text"
                   th:field="*{color}"
                   id="color"
                   placeholder="Enter color"
                   required>
          </div>
          <span class="color-preview" id="colorPreview"></span>
          <div class="error-message" th:if="${#fields.hasErrors('color')}" th:errors="*{color}">
            <i class="fas fa-exclamation-circle"></i> <span th:errors="*{color}">error</span>
          </div>
        </div>

        <div class="form-group">
          <label for="size">Size</label>
          <div class="input-wrapper">
            <i class="fas fa-ruler input-icon"></i>
            <input type="number"
                   th:field="*{size}"
                   id="size"
                   placeholder="Enter size"
                   min="1"
                   step="0.5"
                   required>
          </div>
          <div class="error-message" th:if="${#fields.hasErrors('size')}" th:errors="*{size}">
            <i class="fas fa-exclamation-circle"></i> <span th:errors="*{size}"></span>
          </div>
        </div>

        <div class="form-group">
          <label for="price">Price ($)</label>
          <div class="input-wrapper">
            <i class="fas fa-dollar-sign input-icon"></i>
            <input type="number"
                   th:field="*{price}"
                   id="price"
                   placeholder="0.00"
                   min="0"
                   step="0.01"
                   required>
          </div>
          <div class="error-message" th:if="${#fields.hasErrors('price')}" th:errors="*{price}">
            <i class="fas fa-exclamation-circle"></i> <span th:errors="*{price}"></span>
          </div>
        </div>
      </div>

      <div class="current-values">
        <div class="current-title">
          <i class="fas fa-info-circle"></i> Current Values
        </div>
        <ul class="current-list">
          <li>ID: <strong th:text="${shoes.id}"></strong></li>
          <li>Make sure to save your changes before leaving</li>
          <li>All fields are required</li>
        </ul>
      </div>

      <button type="submit" class="submit-btn">
        <i class="fas fa-save"></i> Update Shoes
      </button>
    </form>
  </div>

  <div class="footer">
    <p>Shoes Catalog &copy; 2023. All rights reserved.</p>
  </div>
</div>

<script>
  // Add some interactivity
  document.addEventListener('DOMContentLoaded', function() {
    const colorInput = document.getElementById('color');
    const colorPreview = document.getElementById('colorPreview');

    // Color name to hex mapping for preview
    const colorMap = {
      'red': '#ff0000',
      'blue': '#0000ff',
      'green': '#008000',
      'black': '#000000',
      'white': '#ffffff',
      'brown': '#a52a2a',
      'gray': '#808080',
      'yellow': '#ffff00',
      'orange': '#ffa500',
      'purple': '#800080',
      'pink': '#ffc0cb',
      'navy': '#000080',
      'beige': '#f5f5dc',
      'tan': '#d2b48c'
    };

    // Update color preview
    colorInput.addEventListener('input', function() {
      const color = this.value.toLowerCase().trim();
      if (colorMap[color]) {
        colorPreview.style.backgroundColor = colorMap[color];
        colorPreview.style.display = 'inline-block';
      } else {
        colorPreview.style.display = 'none';
      }
    });

    // Initialize color preview with current value
    const initialColor = colorInput.value.toLowerCase().trim();
    if (colorMap[initialColor]) {
      colorPreview.style.backgroundColor = colorMap[initialColor];
      colorPreview.style.display = 'inline-block';
    }

    // Focus on the first input when page loads
    document.getElementById('name').focus();

    // Add validation styling
    const inputs = document.querySelectorAll('input[type="text"], input[type="number"]');
    inputs.forEach(input => {
      input.addEventListener('blur', function() {
        if (this.value.trim() === '') {
          this.style.borderColor = '#e53e3e';
        } else {
          this.style.borderColor = '#4CAF50';
        }
      });
    });

    // Add confirmation before leaving if changes were made
    let formChanged = false;
    const form = document.querySelector('form');

    form.addEventListener('input', function() {
      formChanged = true;
    });

    window.addEventListener('beforeunload', function(e) {
      if (formChanged) {
        e.preventDefault();
        e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
      }
    });

    // Reset formChanged when submitting
    form.addEventListener('submit', function() {
      formChanged = false;
    });
  });
</script>
</body>
</html>